:javascript
  var wrapper = $("div#wrapper");
  var resize = function(page) {
    var scale = Math.min($(window).width() / page.width(), $(window).height() / page.height());
    page.width(page.width() * scale);
  };
  function setPageNumber(current) {
    var allNumber = wrapper.find("p").size();
    $("#pageNumber").text((current + 1) + '/' + allNumber);
  };
  $(document).ready( function() {
    setPageNumber(0);
    resize(wrapper.find("p:visible").children("img"));
    spotOneInAllSlide(0);
  });
  function spotOneInAllSlide(current) {
    slides = $('#allslide .one-of-all-slide');
    $.each(slides, function(i,val) {
      if(i == current){
        $(val).find('input').addClass('selected-slide');
      } else {
        $(val).find('input').removeClass('selected-slide');
      }
    });
  };
  function toggleAllSlide() {
    $('div#allslide').fadeToggle();
  };
  function selectPage(index){
    goPage(index);
    toggleAllSlide();
  };
  function go(page) {
    var now = wrapper.find("p:visible");
    if($('div#wrapper p').index(page) != $('div#wrapper p').index(now)) {
      now.fadeOut("fast", function() {
        page.fadeIn("fast");
        resize(page.children("img"));
        current = $('div#wrapper p').index(wrapper.find("p:visible"));
        spotOneInAllSlide(current);
      });
      setPageNumber($('div#wrapper p').index(page));
    }
  };
  $("input:button.prev").click(function() {
    var prev = wrapper.find("p:visible").prev();
    if(prev.length != 0){
      go(prev);
    }
  });
  $("input:button.next").click(function() {
    var next = wrapper.find("p:visible").next();
    if(next.length != 0){
      go(next);
    }
  });
  $("input.next,input.prev").hover( function() {
    $(this).css('width', $(window).width() / 5);
    $(this).css('height', $(window).height());
    $(this).css('opacity', '1');
  }, function(){
    $(this).css('opacity', '0');
  });
  function goFirst(){
    var first = wrapper.find('p:first');
    go(first);
  }
  function goPrev(){
    var prev = wrapper.find('p:visible').prev();
    if(prev.length != 0) {
      go(prev);
    }
  }
  function goNext(){
    var next = wrapper.find('p:visible').next();
    if(next.length != 0) {
      go(next);
    }
  }
  function goLast(){
    var last = wrapper.find('p:last');
    go(last);
  }
  function goPage(index){
    var page = wrapper.find('p:eq(' + index + ')');
    go(page);
  }
